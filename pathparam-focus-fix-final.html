<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PathParamç„¦ç‚¹é—®é¢˜ç»ˆæä¿®å¤</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      margin: 0;
      padding: 20px;
      background: #f0f2f5;
    }
    .fix-container {
      max-width: 1100px;
      margin: 0 auto;
      background: white;
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .fix-header {
      background: linear-gradient(135deg, #ff4d4f 0%, #ff7875 100%);
      color: white;
      padding: 24px;
      border-radius: 12px;
      margin-bottom: 28px;
      text-align: center;
    }
    .problem-analysis {
      background: #fff2f0;
      border: 2px solid #ffccc7;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 24px;
    }
    .solution-summary {
      background: #f6ffed;
      border: 2px solid #b7eb8f;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 24px;
    }
    .code-fix {
      background: #f8f8f8;
      border: 1px solid #d9d9d9;
      border-radius: 8px;
      padding: 16px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      margin: 16px 0;
      overflow-x: auto;
    }
    .test-steps {
      background: #e6f7ff;
      border: 2px solid #91d5ff;
      border-radius: 8px;
      padding: 20px;
    }
    .step-item {
      margin-bottom: 12px;
      padding: 12px;
      background: white;
      border-radius: 6px;
      border-left: 4px solid #1890ff;
    }
    .step-item h4 {
      margin: 0 0 8px 0;
      color: #1890ff;
    }
    .nav-link {
      display: inline-block;
      padding: 14px 28px;
      background: #ff4d4f;
      color: white;
      text-decoration: none;
      border-radius: 8px;
      margin-right: 12px;
      margin-bottom: 12px;
      font-weight: 500;
      transition: all 0.3s ease;
    }
    .nav-link:hover {
      background: #ff7875;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(255,77,79,0.3);
    }
    .critical-point {
      background: #fff1f0;
      border: 1px solid #ffa39e;
      padding: 16px;
      border-radius: 6px;
      margin: 12px 0;
    }
    .critical-point::before {
      content: "âš ï¸ ";
      font-weight: bold;
      color: #ff4d4f;
    }
  </style>
</head>
<body>
  <div class="fix-container">
    <div class="fix-header">
      <h1>ğŸ¯ PathParamè¾“å…¥æ¡†ç„¦ç‚¹é—®é¢˜ç»ˆæä¿®å¤</h1>
      <p>åŸºäºæ‚¨çš„å®é™…æµ‹è¯•åé¦ˆï¼Œç²¾å‡†ä¿®å¤HttpConfigStep1.vueä¸­çš„çŠ¶æ€ç®¡ç†é—®é¢˜</p>
    </div>

    <div class="problem-analysis">
      <h3>ğŸ” é—®é¢˜æ ¹æºåˆ†æï¼ˆåŸºäºæ‚¨çš„æ—¥å¿—ï¼‰</h3>
      <p>ä»æ‚¨æä¾›çš„æ§åˆ¶å°æ—¥å¿—å¯ä»¥çœ‹å‡ºï¼š</p>
      <div class="code-fix">
ğŸ”„ [HttpConfigStep1] é…ç½®æ›´æ–° - pathParams: [{â€¦}]
ğŸ”„ [HttpConfigStep1] é…ç½®æ›´æ–° - pathParameter: {...}
ğŸ“ [HttpConfigStep1] å‚æ•°é…ç½®æ›´æ–°ï¼Œä½†ä¸ä¿®æ”¹URLæ¨¡æ¿
      </div>
      
      <div class="critical-point">
        <strong>æ ¸å¿ƒé—®é¢˜ï¼š</strong>æ¯æ¬¡è¾“å…¥ä¸€ä¸ªå­—ç¬¦éƒ½è§¦å‘3æ¬¡é…ç½®æ›´æ–°ï¼š
        <ol>
          <li><code>updateConfig('pathParams', params)</code></li>
          <li><code>updateConfig('pathParameter', {...})</code></li>
          <li><code>updateConfig('url', apiInfo.url)</code></li>
        </ol>
        æ¯æ¬¡emitéƒ½å¯¼è‡´çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œç ´åäº†è¾“å…¥æ¡†çš„ç„¦ç‚¹çŠ¶æ€ã€‚
      </div>
    </div>

    <div class="solution-summary">
      <h3>âœ… ä¿®å¤æ–¹æ¡ˆæ€»ç»“</h3>
      
      <h4>ä¿®å¤1ï¼šæ‰¹é‡æ›´æ–°é…ç½®</h4>
      <div class="code-fix">
// ä¿®å¤å‰ï¼šå¤šæ¬¡å•ç‹¬æ›´æ–°
updateConfig('pathParams', params)
updateConfig('pathParameter', {...})
updateConfig('url', apiInfo.url)

// ä¿®å¤åï¼šä¸€æ¬¡æ€§æ‰¹é‡æ›´æ–°
const batchUpdates = { pathParams: params, pathParameter: {...}, url: apiInfo.url }
const newConfig = { ...props.modelValue, ...batchUpdates }
emit('update:modelValue', newConfig)  // åªå‘å°„ä¸€æ¬¡
      </div>

      <h4>ä¿®å¤2ï¼šé¿å…å¾ªç¯æ›´æ–°</h4>
      <div class="code-fix">
// æ·»åŠ æ›´æ–°æ ‡è®°
const isUpdatingFromChild = ref(false)

// åœ¨å­ç»„ä»¶æ›´æ–°æ—¶è®¾ç½®æ ‡è®°
const onUrlParamsUpdate = (params) => {
  isUpdatingFromChild.value = true
  // ...æ›´æ–°é€»è¾‘
  nextTick(() => { isUpdatingFromChild.value = false })
}

// åœ¨watchä¸­æ£€æŸ¥æ ‡è®°
watch(() => props.modelValue, () => {
  if (isUpdatingFromChild.value) return  // è·³è¿‡å¾ªç¯æ›´æ–°
  // ...åŒæ­¥é€»è¾‘
})
      </div>

      <h4>ä¿®å¤3ï¼šç¨³å®šçš„Vue Keyå€¼ï¼ˆDynamicParameterEditorï¼‰</h4>
      <div class="code-fix">
// ç¡®ä¿å‚æ•°åˆ—è¡¨ä½¿ç”¨ç¨³å®šçš„key
:key="param._id"  // è€Œä¸æ˜¯åŸºäºparam.keyçš„ä¸ç¨³å®škey
      </div>
    </div>

    <div class="test-steps">
      <h3>ğŸ§ª éªŒè¯æµ‹è¯•æ­¥éª¤</h3>
      
      <div class="step-item">
        <h4>æ­¥éª¤1ï¼šè®¿é—®HTTPé…ç½®é¡µé¢</h4>
        <p>æ‰“å¼€æ•°æ®æºç³»ç»Ÿæµ‹è¯•é¡µé¢ï¼Œæ‰¾åˆ°HTTPé…ç½®è¡¨å•</p>
        <a href="http://localhost:5002/test/data-source-system" class="nav-link" target="_blank">
          æ‰“å¼€æ•°æ®æºç³»ç»Ÿæµ‹è¯•
        </a>
      </div>

      <div class="step-item">
        <h4>æ­¥éª¤2ï¼šé€‰æ‹©å†…éƒ¨åœ°å€ç±»å‹</h4>
        <p>1. åœ¨HTTPé…ç½®ç¬¬1æ­¥ä¸­ï¼Œé€‰æ‹©"åœ°å€ç±»å‹"ä¸º"å†…éƒ¨åœ°å€"<br>
           2. é€‰æ‹©ä»»ä½•ä¸€ä¸ªå¸¦æœ‰è·¯å¾„å‚æ•°çš„æ¥å£ï¼ˆå¦‚ï¼šè®¾å¤‡è¯¦æƒ… - /device/detail/{id}ï¼‰</p>
      </div>

      <div class="step-item">
        <h4>æ­¥éª¤3ï¼šå¯ç”¨URLä¼ å‚</h4>
        <p>1. æ‰¾åˆ°"URLä¼ å‚"å¼€å…³å¹¶å¯ç”¨<br>
           2. æ­¤æ—¶ä¼šå‡ºç°"å‚æ•°é…ç½®"åŒºåŸŸï¼Œæ˜¾ç¤ºpathParamè¾“å…¥æ¡†</p>
      </div>

      <div class="step-item">
        <h4>æ­¥éª¤4ï¼šæµ‹è¯•ç„¦ç‚¹ä¿æŒï¼ˆå…³é”®ï¼ï¼‰</h4>
        <p>1. åœ¨å‚æ•°åè¾“å…¥æ¡†ä¸­<strong>è¿ç»­è¾“å…¥å¤šä¸ªå­—ç¬¦</strong><br>
           2. <strong>éªŒè¯ï¼šè¾“å…¥æ¡†åº”ä¿æŒç„¦ç‚¹ï¼Œä¸ä¼šæ¯è¾“å…¥ä¸€ä¸ªå­—ç¬¦å°±å¤±å»ç„¦ç‚¹</strong><br>
           3. æ£€æŸ¥æ§åˆ¶å°ï¼Œåº”è¯¥çœ‹åˆ°"æ‰¹é‡å‚æ•°é…ç½®æ›´æ–°"è€Œä¸æ˜¯å¤šæ¬¡å•ç‹¬æ›´æ–°</p>
      </div>

      <div class="step-item">
        <h4>æ­¥éª¤5ï¼šæµ‹è¯•é»˜è®¤å€¼è¡Œä¸º</h4>
        <p>1. æ¸…ç©ºå‚æ•°åè¾“å…¥æ¡†<br>
           2. ç‚¹å‡»å…¶ä»–åœ°æ–¹ä½¿è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹<br>
           3. <strong>éªŒè¯ï¼šåº”è®¾ç½®åˆç†çš„é»˜è®¤å€¼ï¼Œä½†ä¸ä¼šå¼ºåˆ¶è¦†ç›–æ­£åœ¨è¾“å…¥çš„å†…å®¹</strong></p>
      </div>
    </div>

    <div style="background: #fafafa; border: 1px solid #e8e8e8; border-radius: 8px; padding: 20px; margin-top: 24px;">
      <h3>ğŸ“Š é¢„æœŸä¿®å¤æ•ˆæœ</h3>
      
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
        <div style="background: #fff2f0; padding: 16px; border-radius: 6px;">
          <h4 style="color: #ff4d4f; margin: 0 0 8px 0;">ä¿®å¤å‰ âŒ</h4>
          <ul style="margin: 0; font-size: 14px;">
            <li>æ¯è¾“å…¥ä¸€ä¸ªå­—ç¬¦å¤±å»ç„¦ç‚¹</li>
            <li>æ§åˆ¶å°æ˜¾ç¤º3æ¬¡é…ç½®æ›´æ–°</li>
            <li>é»˜è®¤å€¼å¼ºåˆ¶è¦†ç›–ç”¨æˆ·è¾“å…¥</li>
            <li>è¾“å…¥ä½“éªŒæå…¶ç³Ÿç³•</li>
          </ul>
        </div>
        
        <div style="background: #f6ffed; padding: 16px; border-radius: 6px;">
          <h4 style="color: #52c41a; margin: 0 0 8px 0;">ä¿®å¤å âœ…</h4>
          <ul style="margin: 0; font-size: 14px;">
            <li>è¾“å…¥æ¡†ä¿æŒç„¦ç‚¹</li>
            <li>æ§åˆ¶å°æ˜¾ç¤º1æ¬¡æ‰¹é‡æ›´æ–°</li>
            <li>æ™ºèƒ½çš„é»˜è®¤å€¼ç­–ç•¥</li>
            <li>æµç•…çš„è¾“å…¥ä½“éªŒ</li>
          </ul>
        </div>
      </div>
    </div>

    <div style="text-align: center; margin-top: 32px; padding: 20px; background: #e6f7ff; border-radius: 8px;">
      <h3>ğŸš€ ç«‹å³æµ‹è¯•ä¿®å¤æ•ˆæœï¼</h3>
      <p>ç°åœ¨å°±å¯ä»¥æŒ‰ç…§ä¸Šè¿°æ­¥éª¤éªŒè¯pathParamè¾“å…¥æ¡†æ˜¯å¦å·²ç»ä¿®å¤äº†ç„¦ç‚¹ä¸¢å¤±é—®é¢˜</p>
      <a href="http://localhost:5002/test/data-source-system" class="nav-link" target="_blank" style="font-size: 16px;">
        ğŸ”— å¼€å§‹æµ‹è¯•PathParamä¿®å¤æ•ˆæœ
      </a>
    </div>
  </div>
</body>
</html>