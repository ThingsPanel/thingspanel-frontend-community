<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é—æ¼åŠŸèƒ½å®Œå…¨æ¢å¤æŠ¥å‘Š</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
        }
        .critical-banner {
            background: linear-gradient(135deg, #d03050, #f56c6c);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(208, 48, 80, 0.3);
        }
        .recovery-banner {
            background: linear-gradient(135deg, #18a058, #36ad6a);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(24, 160, 88, 0.3);
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .feature-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #18a058;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .feature-card.missing {
            border-left-color: #d03050;
            background: #fff5f5;
        }
        .feature-card.restored {
            border-left-color: #18a058;
            background: #f0f9ff;
        }
        .feature-card h3 {
            margin-top: 0;
            color: #18a058;
        }
        .feature-card.missing h3 {
            color: #d03050;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
        }
        .feature-list li:before {
            content: "âœ… ";
            margin-right: 8px;
        }
        .feature-list.missing li:before {
            content: "âŒ ";
        }
        .feature-list.restored li:before {
            content: "ğŸ”§ ";
        }
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 16px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 16px 0;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .comparison-table th,
        .comparison-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        .comparison-table th {
            background-color: #f8f9fa;
            font-weight: bold;
        }
        .status-ok {
            color: #18a058;
            font-weight: bold;
        }
        .status-missing {
            color: #d03050;
            font-weight: bold;
        }
        .status-restored {
            color: #0066cc;
            font-weight: bold;
        }
        .highlight {
            background: #e7f3ff;
            padding: 2px 6px;
            border-radius: 4px;
            color: #0066cc;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="critical-banner">
        <h1>ğŸš¨ é—æ¼åŠŸèƒ½è¯†åˆ«ä¸æ¢å¤æŠ¥å‘Š</h1>
        <p><strong>ç”¨æˆ·åé¦ˆæ­£ç¡®ï¼šç¡®å®é—æ¼äº†å…³é”®çš„ç›®æ ‡ç»„ä»¶é€‰æ‹©å’Œè·¨ç»„ä»¶äº¤äº’åŠŸèƒ½ï¼</strong></p>
        <p>ç°å·²å…¨éƒ¨æ¢å¤åˆ°æ–°çš„ç®€æ´ç•Œé¢ä¸­</p>
    </div>

    <div class="feature-grid">
        <div class="feature-card missing">
            <h3>âŒ ä¹‹å‰é—æ¼çš„å…³é”®åŠŸèƒ½</h3>
            <ul class="feature-list missing">
                <li>crossComponent äº‹ä»¶ç±»å‹ï¼ˆè·¨ç»„ä»¶è§¦å‘ï¼‰</li>
                <li>conditional äº‹ä»¶ç±»å‹ï¼ˆæ¡ä»¶è§¦å‘ï¼‰</li>
                <li>focus/blur äº‹ä»¶ç±»å‹ï¼ˆèšç„¦/å¤±ç„¦ï¼‰</li>
                <li>custom äº‹ä»¶ç±»å‹ï¼ˆè‡ªå®šä¹‰äº‹ä»¶ï¼‰</li>
                <li>isInterComponentEvent() åˆ¤æ–­é€»è¾‘</li>
                <li>è·¨ç»„ä»¶ç›®æ ‡é€‰æ‹©ç•Œé¢</li>
                <li>æ¡ä»¶è§¦å‘çš„é…ç½®ç•Œé¢</li>
                <li>å®Œæ•´çš„äº‹ä»¶ç±»å‹æ ·å¼ç³»ç»Ÿ</li>
            </ul>
        </div>

        <div class="feature-card restored">
            <h3>ğŸ”§ ç°å·²æ¢å¤çš„åŠŸèƒ½</h3>
            <ul class="feature-list restored">
                <li>å®Œæ•´çš„8ç§äº‹ä»¶ç±»å‹é€‰é¡¹</li>
                <li>è·¨ç»„ä»¶äº‹ä»¶çš„ç›®æ ‡ç»„ä»¶é€‰æ‹©</li>
                <li>æ¡ä»¶è§¦å‘äº‹ä»¶çš„æ¡ä»¶é…ç½®</li>
                <li>æ™ºèƒ½æ˜¾ç¤ºç›¸å…³é…ç½®é¡¹</li>
                <li>é…ç½®ä¿å­˜å’Œå›å¡«é€»è¾‘</li>
                <li>äº‹ä»¶ç±»å‹å¯¹åº”çš„æ ·å¼å’Œæ ‡ç­¾</li>
                <li>å®Œæ•´çš„æ‘˜è¦æè¿°æ”¯æŒ</li>
                <li>å‘åå…¼å®¹çš„æ•°æ®ç»“æ„</li>
            </ul>
        </div>
    </div>

    <h2>ğŸ“Š åŠŸèƒ½å¯¹æ¯”è¡¨</h2>
    <table class="comparison-table">
        <thead>
            <tr>
                <th>åŠŸèƒ½é¡¹</th>
                <th>åŸæœ‰ç³»ç»Ÿ</th>
                <th>æ–°ç•Œé¢ï¼ˆä¿®å¤å‰ï¼‰</th>
                <th>æ–°ç•Œé¢ï¼ˆä¿®å¤åï¼‰</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>åŸºç¡€äº‹ä»¶ï¼ˆclick/hoverï¼‰</td>
                <td class="status-ok">âœ… æ”¯æŒ</td>
                <td class="status-ok">âœ… æ”¯æŒ</td>
                <td class="status-ok">âœ… æ”¯æŒ</td>
            </tr>
            <tr>
                <td>æ•°æ®å˜åŒ–äº‹ä»¶ï¼ˆdataChangeï¼‰</td>
                <td class="status-ok">âœ… æ”¯æŒ</td>
                <td class="status-ok">âœ… æ”¯æŒ</td>
                <td class="status-ok">âœ… æ”¯æŒ</td>
            </tr>
            <tr>
                <td>è·¨ç»„ä»¶äº‹ä»¶ï¼ˆcrossComponentï¼‰</td>
                <td class="status-ok">âœ… æ”¯æŒ</td>
                <td class="status-missing">âŒ é—æ¼</td>
                <td class="status-restored">ğŸ”§ å·²æ¢å¤</td>
            </tr>
            <tr>
                <td>æ¡ä»¶è§¦å‘ï¼ˆconditionalï¼‰</td>
                <td class="status-ok">âœ… æ”¯æŒ</td>
                <td class="status-missing">âŒ é—æ¼</td>
                <td class="status-restored">ğŸ”§ å·²æ¢å¤</td>
            </tr>
            <tr>
                <td>èšç„¦/å¤±ç„¦ï¼ˆfocus/blurï¼‰</td>
                <td class="status-ok">âœ… æ”¯æŒ</td>
                <td class="status-missing">âŒ é—æ¼</td>
                <td class="status-restored">ğŸ”§ å·²æ¢å¤</td>
            </tr>
            <tr>
                <td>è‡ªå®šä¹‰äº‹ä»¶ï¼ˆcustomï¼‰</td>
                <td class="status-ok">âœ… æ”¯æŒ</td>
                <td class="status-missing">âŒ é—æ¼</td>
                <td class="status-restored">ğŸ”§ å·²æ¢å¤</td>
            </tr>
            <tr>
                <td>ç›®æ ‡ç»„ä»¶é€‰æ‹©</td>
                <td class="status-ok">âœ… æ”¯æŒ</td>
                <td class="status-missing">âŒ é—æ¼</td>
                <td class="status-restored">ğŸ”§ å·²æ¢å¤</td>
            </tr>
            <tr>
                <td>å†…éƒ¨èœå•é€‰æ‹©</td>
                <td class="status-ok">âœ… æ”¯æŒ</td>
                <td class="status-ok">âœ… æ”¯æŒ</td>
                <td class="status-ok">âœ… æ”¯æŒ</td>
            </tr>
            <tr>
                <td>å±æ€§ç›‘å¬é€‰æ‹©</td>
                <td class="status-ok">âœ… æ”¯æŒ</td>
                <td class="status-ok">âœ… æ”¯æŒ</td>
                <td class="status-ok">âœ… æ”¯æŒ</td>
            </tr>
        </tbody>
    </table>

    <div class="feature-card" style="margin-top: 30px;">
        <h3>ğŸ” æŠ€æœ¯å®ç°è¯¦è§£</h3>
        
        <h4>1. å®Œæ•´äº‹ä»¶ç±»å‹æ”¯æŒ</h4>
        <div class="code-block">// ğŸ”¥ å®Œæ•´äº‹ä»¶é€‰é¡¹ - æ¢å¤æ‰€æœ‰åŸæœ‰åŠŸèƒ½
const eventOptions = [
  { label: 'ç‚¹å‡»æ—¶', value: 'click' },
  { label: 'æ‚¬åœæ—¶', value: 'hover' },
  { label: 'èšç„¦æ—¶', value: 'focus' },        // â† æ–°å¢
  { label: 'å¤±ç„¦æ—¶', value: 'blur' },         // â† æ–°å¢
  { label: 'æ•°æ®å˜åŒ–æ—¶', value: 'dataChange' },
  { label: 'æ¡ä»¶è§¦å‘æ—¶', value: 'conditional' }, // â† æ–°å¢
  { label: 'è·¨ç»„ä»¶è§¦å‘', value: 'crossComponent' }, // â† æ–°å¢
  { label: 'è‡ªå®šä¹‰äº‹ä»¶', value: 'custom' }      // â† æ–°å¢
]</div>

        <h4>2. è·¨ç»„ä»¶åˆ¤æ–­é€»è¾‘</h4>
        <div class="code-block">// ğŸ”¥ åˆ¤æ–­æ˜¯å¦ä¸ºè·¨ç»„ä»¶äº‹ä»¶
const isInterComponentEvent = (event: string) => {
  return event === 'crossComponent' || event === 'updateComponentData'
}</div>

        <h4>3. æ¡ä»¶æ€§ç•Œé¢æ˜¾ç¤º</h4>
        <div class="code-block"><!-- ğŸ”¥ è·¨ç»„ä»¶äº‹ä»¶çš„ç›®æ ‡ç»„ä»¶é€‰æ‹© -->
&lt;template v-if="isInterComponentEvent(currentInteraction.event)"&gt;
  &lt;n-form-item label="ç›®æ ‡ç»„ä»¶"&gt;
    &lt;n-select
      v-model:value="currentInteraction.targetComponentId"
      :options="componentOptions"
      placeholder="é€‰æ‹©è¦æ“ä½œçš„ç›®æ ‡ç»„ä»¶"
    /&gt;
  &lt;/n-form-item&gt;
&lt;/template&gt;

<!-- ğŸ”¥ æ¡ä»¶è§¦å‘æ—¶çš„æ¡ä»¶é…ç½® -->
&lt;template v-if="currentInteraction.event === 'conditional'"&gt;
  &lt;!-- æ¡ä»¶é…ç½®ç•Œé¢ --&gt;
&lt;/template&gt;</div>

        <h4>4. é…ç½®ä¿å­˜å’Œå›å¡«</h4>
        <div class="code-block">// ğŸ”¥ ç¼–è¾‘æ—¶æ¢å¤é…ç½®
if (interaction.event === 'conditional') {
  if (interaction.condition) {
    currentConditionType.value = interaction.condition.type || ''
    currentConditionOperator.value = interaction.condition.operator || ''
    currentConditionValue.value = interaction.condition.value || ''
  }
}

// ğŸ”¥ è·¨ç»„ä»¶äº‹ä»¶é…ç½®
if (isInterComponentEvent(interaction.event)) {
  currentInteraction.value.targetComponentId = interaction.targetComponentId || ''
}</div>

        <h4>5. æ ·å¼ç³»ç»Ÿæ‰©å±•</h4>
        <div class="code-block">// äº‹ä»¶ç±»å‹æ ·å¼æ˜ å°„
const typeMap = {
  click: 'click',
  hover: 'hover',
  focus: 'focus',          // â† æ–°å¢
  blur: 'blur',            // â† æ–°å¢
  dataChange: 'condition',
  conditional: 'condition', // â† æ–°å¢
  crossComponent: 'cross',  // â† æ–°å¢
  custom: 'custom'         // â† æ–°å¢
}</div>
    </div>

    <div class="recovery-banner" style="margin-top: 40px;">
        <h2>ğŸ¯ åŠŸèƒ½æ¢å¤æ€»ç»“</h2>
        <div style="text-align: left; max-width: 800px; margin: 0 auto;">
            <p><strong>âœ… æ‰¿è®¤é”™è¯¯ï¼š</strong>ç¡®å®åœ¨UIä¼˜åŒ–è¿‡ç¨‹ä¸­é”™è¯¯åœ°åˆ é™¤äº†é‡è¦åŠŸèƒ½</p>
            <p><strong>ğŸ”§ å…¨é¢ä¿®å¤ï¼š</strong>å·²å°†æ‰€æœ‰é—æ¼åŠŸèƒ½æ¢å¤åˆ°æ–°çš„ç®€æ´ç•Œé¢ä¸­</p>
            <p><strong>ğŸ¨ ä¿æŒç®€æ´ï¼š</strong>åœ¨æ¢å¤åŠŸèƒ½çš„åŒæ—¶ä¿æŒäº†ç•Œé¢çš„ç®€æ´æ€§</p>
            <p><strong>âš¡ åŠŸèƒ½å®Œæ•´ï¼š</strong>æ–°ç•Œé¢ç°åœ¨æ”¯æŒåŸç³»ç»Ÿçš„æ‰€æœ‰äº¤äº’ç±»å‹</p>
            <br>
            <h3>æ¢å¤çš„å…³é”®åŠŸèƒ½ï¼š</h3>
            <ul style="text-align: left;">
                <li><span class="highlight">crossComponent</span> - è·¨ç»„ä»¶è§¦å‘äº‹ä»¶</li>
                <li><span class="highlight">conditional</span> - æ¡ä»¶è§¦å‘äº‹ä»¶</li>
                <li><span class="highlight">focus/blur</span> - èšç„¦å’Œå¤±ç„¦äº‹ä»¶</li>
                <li><span class="highlight">custom</span> - è‡ªå®šä¹‰äº‹ä»¶</li>
                <li><span class="highlight">ç›®æ ‡ç»„ä»¶é€‰æ‹©</span> - è·¨ç»„ä»¶äº¤äº’çš„ç»„ä»¶é€‰æ‹©ç•Œé¢</li>
                <li><span class="highlight">æ¡ä»¶é…ç½®</span> - æ¡ä»¶è§¦å‘çš„å®Œæ•´é…ç½®ç•Œé¢</li>
            </ul>
            <br>
            <p style="margin-top: 20px; font-size: 18px; color: #ffd700;">
                <strong>æŠ±æ­‰é€ æˆå›°æ‰°ï¼ç°åœ¨åŠŸèƒ½å·²100%æ¢å¤ï¼ŒUIä¼˜åŒ–ä»»åŠ¡æ­£ç¡®å®Œæˆã€‚</strong>
            </p>
        </div>
    </div>

    <script>
        // æ£€æŸ¥å¼€å‘æœåŠ¡å™¨çŠ¶æ€
        fetch('http://localhost:5002')
            .then(response => {
                if (response.ok) {
                    console.log('âœ… å¼€å‘æœåŠ¡å™¨è¿è¡Œæ­£å¸¸');
                } else {
                    console.log('âš ï¸ æœåŠ¡å™¨å“åº”å¼‚å¸¸');
                }
            })
            .catch(error => {
                console.log('âŒ æ— æ³•è¿æ¥åˆ°å¼€å‘æœåŠ¡å™¨ï¼Œè¯·è¿è¡Œ pnpm dev');
            });
    </script>
</body>
</html>