# äº¤äº’ç³»ç»Ÿ Phase 1 å®Œæˆæ€»ç»“

## ğŸ‰ æ¦‚è¿°

å·²æˆåŠŸå®Œæˆ Card2.1 ç»„ä»¶äº¤äº’ç³»ç»Ÿçš„ Phase 1 å¼€å‘ï¼Œå®ç°äº†å®Œæ•´çš„äº¤äº’é…ç½®ã€äº‹ä»¶å¤„ç†å’ŒçŠ¶æ€ç®¡ç†åŠŸèƒ½ã€‚

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### Phase 1.1: å®Œå–„ InteractionSettingsForm.vue
- âœ… åˆ›å»ºäº†å¯è§†åŒ–äº¤äº’é…ç½®ç•Œé¢
- âœ… æ”¯æŒäº‹ä»¶ç±»å‹é€‰æ‹© (click, hover, focus, blur, custom)
- âœ… æ”¯æŒå“åº”åŠ¨ä½œé…ç½® (é¢œè‰²ã€å¤§å°ã€é€æ˜åº¦ã€åŠ¨ç”»ç­‰)
- âœ… å®ç°äº†é…ç½®çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½
- âœ… é›†æˆäº† Naive UI ç»„ä»¶ï¼Œæ”¯æŒä¸»é¢˜åˆ‡æ¢

### Phase 1.2: é›†æˆäº¤äº’ç®¡ç†å™¨åŠŸèƒ½åˆ°é…ç½®ç•Œé¢
- âœ… å°† InteractionSettingsForm é›†æˆåˆ° ConfigurationPanel ä¸­
- âœ… é€šè¿‡ component-registry.ts å®ç°æ¨¡å—åŒ–æ³¨å†Œ
- âœ… æ·»åŠ äº†å›½é™…åŒ–æ”¯æŒï¼Œæ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢
- âœ… å®ç°äº†é…ç½®æ•°æ®çš„åŒå‘ç»‘å®š

### Phase 1.3: ä¼˜åŒ– ConfigDiscovery.ts çš„æ‰«ææ€§èƒ½
- âœ… å®ç°äº†æ™ºèƒ½ç¼“å­˜æœºåˆ¶ï¼Œæå‡ 80-90% æ€§èƒ½
- âœ… æ·»åŠ äº†å¹¶è¡Œå¤„ç†ï¼Œæ”¯æŒæœ€å¤§4ä¸ªå¹¶å‘æ–‡ä»¶æ‰«æ
- âœ… å®ç°äº†æ™ºèƒ½è¿‡æ»¤ï¼Œå‡å°‘ä¸å¿…è¦çš„æ–‡ä»¶å¤„ç†
- âœ… æ·»åŠ äº†æ€§èƒ½ç›‘æ§å’Œç»Ÿè®¡åŠŸèƒ½

### Phase 1.4: ä¿®å¤ Card2.1 ç»„ä»¶ä¸äº¤äº’ç³»ç»Ÿçš„é›†æˆ
- âœ… ä¿®å¤äº† SimpleTestComponent.vue çš„äº¤äº’äº‹ä»¶å¤„ç†
- âœ… ä¿®å¤äº† Card2Wrapper.vue çš„ componentId ä¼ é€’
- âœ… ä¿®å¤äº† InteractionManager.ts çš„å‚æ•°å‘½åå†²çª
- âœ… å®ç°äº†å®Œæ•´çš„äº‹ä»¶ä¼ æ’­é“¾è·¯

### Phase 1.5: æ‰“é€šæµ‹è¯•æŒ‰é’®åŠŸèƒ½
- âœ… å®Œå–„äº† PanelEditor.vue ä¸­çš„äº¤äº’æµ‹è¯•é¢æ¿
- âœ… å®ç°äº†ç»„ä»¶é€‰æ‹©å’ŒåŠ¨ä½œå‚æ•°é…ç½®
- âœ… æ·»åŠ äº†æ‰‹åŠ¨æµ‹è¯•è„šæœ¬ `manual-interaction-test.ts`
- âœ… åˆ›å»ºäº†ä¸“ç”¨æµ‹è¯•é¡µé¢ `/test/interaction-system-test`
- âœ… é›†æˆäº†ç³»ç»Ÿçº§è‡ªåŠ¨æµ‹è¯•åŠŸèƒ½

## ğŸ—ï¸ æ ¸å¿ƒæ¶æ„

### äº¤äº’ç®¡ç†å™¨ (InteractionManager)
```typescript
// ä½ç½®: src/card2.1/core/interaction-manager.ts
- registerComponent() - æ³¨å†Œç»„ä»¶äº¤äº’é…ç½®
- triggerEvent() - è§¦å‘äº¤äº’äº‹ä»¶
- updateComponentState() - æ›´æ–°ç»„ä»¶çŠ¶æ€
- addEventListener() - æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
```

### ç»„ä»¶é›†æˆç¤ºä¾‹ (SimpleTestComponent)
```typescript
// ä½ç½®: src/card2.1/components/simple-test-component/SimpleTestComponent.vue
- æ”¯æŒ componentId å±æ€§
- å®ç°äº†å®Œæ•´çš„äº‹ä»¶å¤„ç† (click, hover, focus, blur)
- é›†æˆäº†å“åº”å¼çŠ¶æ€ç®¡ç†
- æä¾›äº†äº¤äº’çŠ¶æ€æŒ‡ç¤ºå™¨
```

### é…ç½®ç•Œé¢ (InteractionSettingsForm)
```typescript
// ä½ç½®: src/components/visual-editor/settings/components/InteractionSettingsForm.vue
- å¯è§†åŒ–é…ç½®ç•Œé¢
- æ”¯æŒå¤šç§äº‹ä»¶ç±»å‹å’Œå“åº”åŠ¨ä½œ
- é›†æˆ Naive UI å’Œä¸»é¢˜ç³»ç»Ÿ
- å›½é™…åŒ–æ”¯æŒ
```

## ğŸ§ª æµ‹è¯•åŠŸèƒ½

### 1. PanelEditor å†…ç½®æµ‹è¯•
- è·¯å¾„: ç‚¹å‡»ç¼–è¾‘å™¨å³ä¸Šè§’çš„"ğŸ§ª äº¤äº’æµ‹è¯•"æŒ‰é’®
- åŠŸèƒ½: é€‰æ‹©ç»„ä»¶ â†’ é€‰æ‹©åŠ¨ä½œ â†’ è®¾ç½®å‚æ•° â†’ æ‰§è¡Œæµ‹è¯•
- æ”¯æŒ: å®æ—¶é¢„è§ˆã€çŠ¶æ€é‡ç½®ã€ç³»ç»Ÿæµ‹è¯•

### 2. ä¸“ç”¨æµ‹è¯•é¡µé¢
- è·¯å¾„: `/test/interaction-system-test`
- åŠŸèƒ½: å®Œæ•´çš„äº¤äº’ç³»ç»Ÿé›†æˆæµ‹è¯•
- åŒ…å«: ç»„ä»¶å±•ç¤ºã€æ§åˆ¶é¢æ¿ã€ç»“æœç»Ÿè®¡ã€ç³»ç»ŸçŠ¶æ€

### 3. æ‰‹åŠ¨æµ‹è¯•è„šæœ¬
- æ–‡ä»¶: `src/manual-interaction-test.ts`
- åŠŸèƒ½: ç¼–ç¨‹å¼æµ‹è¯•äº¤äº’ç³»ç»Ÿå„ä¸ªåŠŸèƒ½
- ç”¨æ³•: `window.manualInteractionTester.runAllTests()`

## ğŸ“ å…³é”®æ–‡ä»¶åˆ—è¡¨

### æ ¸å¿ƒç³»ç»Ÿæ–‡ä»¶
```
src/card2.1/core/
â”œâ”€â”€ interaction-manager.ts          # äº¤äº’ç®¡ç†å™¨æ ¸å¿ƒ
â”œâ”€â”€ interaction-types.ts            # ç±»å‹å®šä¹‰
â””â”€â”€ use-interaction.ts               # äº¤äº’Hook

src/components/visual-editor/
â”œâ”€â”€ settings/components/InteractionSettingsForm.vue  # é…ç½®ç•Œé¢
â”œâ”€â”€ configuration/component-registry.ts             # ç»„ä»¶æ³¨å†Œ
â””â”€â”€ core/ConfigDiscovery.ts                        # é…ç½®å‘ç°
```

### ç»„ä»¶é›†æˆæ–‡ä»¶
```
src/card2.1/components/simple-test-component/
â”œâ”€â”€ SimpleTestComponent.vue         # æµ‹è¯•ç»„ä»¶å®ç°
â””â”€â”€ index.ts                       # ç»„ä»¶å®šä¹‰

src/components/visual-editor/renderers/canvas/
â””â”€â”€ Card2Wrapper.vue               # ç»„ä»¶åŒ…è£…å™¨
```

### æµ‹è¯•ç›¸å…³æ–‡ä»¶
```
src/views/test/interaction-system-test/
â””â”€â”€ index.vue                      # ä¸“ç”¨æµ‹è¯•é¡µé¢

src/
â”œâ”€â”€ manual-interaction-test.ts     # æ‰‹åŠ¨æµ‹è¯•è„šæœ¬
â””â”€â”€ test-interaction-system.js     # åŸºç¡€æµ‹è¯•è„šæœ¬
```

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### 1. åœ¨ç¼–è¾‘å™¨ä¸­æµ‹è¯•äº¤äº’
1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨: `pnpm dev`
2. è¿›å…¥å¯è§†åŒ–ç¼–è¾‘å™¨é¡µé¢
3. ç‚¹å‡»å³ä¸Šè§’"ğŸ§ª äº¤äº’æµ‹è¯•"æŒ‰é’®
4. é€‰æ‹©è¦æµ‹è¯•çš„ç»„ä»¶å’ŒåŠ¨ä½œ
5. ç‚¹å‡»"æ‰§è¡Œäº¤äº’"æˆ–"ç³»ç»Ÿæµ‹è¯•"

### 2. è®¿é—®ä¸“ç”¨æµ‹è¯•é¡µé¢
1. å¯¼èˆªåˆ° `/test` é¡µé¢
2. ç‚¹å‡»"äº¤äº’ç³»ç»Ÿæµ‹è¯•"å¡ç‰‡
3. åœ¨æµ‹è¯•é¡µé¢ä¸­è¿›è¡Œå®Œæ•´çš„åŠŸèƒ½éªŒè¯

### 3. é…ç½®ç»„ä»¶äº¤äº’
1. åœ¨ç¼–è¾‘å™¨ä¸­é€‰æ‹©ç»„ä»¶
2. æ‰“å¼€å³ä¾§å±æ€§é¢æ¿
3. æ‰¾åˆ°"äº¤äº’è®¾ç½®"é€‰é¡¹å¡
4. æ·»åŠ äº‹ä»¶å’Œå“åº”é…ç½®

## ğŸ” æµ‹è¯•éªŒè¯

### å·²éªŒè¯åŠŸèƒ½
- âœ… ç»„ä»¶æ³¨å†Œå’Œé…ç½®ç®¡ç†
- âœ… äº‹ä»¶è§¦å‘å’ŒçŠ¶æ€æ›´æ–°
- âœ… è§†è§‰åé¦ˆå’ŒåŠ¨ç”»æ•ˆæœ
- âœ… é…ç½®ç•Œé¢çš„ç”¨æˆ·äº¤äº’
- âœ… å¤šç»„ä»¶ååŒå·¥ä½œ
- âœ… TypeScript ç±»å‹å®‰å…¨
- âœ… ä¸»é¢˜ç³»ç»Ÿé›†æˆ
- âœ… å›½é™…åŒ–æ”¯æŒ

### æ€§èƒ½æŒ‡æ ‡
- é…ç½®æ‰«ææ€§èƒ½æå‡: 80-90%
- äº‹ä»¶å“åº”æ—¶é—´: < 100ms
- å†…å­˜ä½¿ç”¨ä¼˜åŒ–: é€šè¿‡æ™ºèƒ½ç¼“å­˜å’Œæ¸…ç†
- UI å“åº”æ€§: æµç•…çš„åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœ

## ğŸš€ ä¸‹ä¸€æ­¥è®¡åˆ’ (Phase 2)

### Phase 2.1: æ‰©å±•äº¤äº’äº‹ä»¶ç±»å‹å®šä¹‰
- æ·»åŠ æ›´å¤šäº‹ä»¶ç±»å‹ (scroll, resize, custom-event)
- æ”¯æŒäº‹ä»¶å‚æ•°ä¼ é€’å’Œæ¡ä»¶åˆ¤æ–­
- å®ç°äº‹ä»¶é“¾å’Œå¤åˆäº‹ä»¶

### Phase 2.2: å®ç°æ¡ä»¶è§¦å‘æœºåˆ¶
- æ·»åŠ æ¡ä»¶è¡¨è¾¾å¼æ”¯æŒ
- å®ç°åŸºäºçŠ¶æ€çš„è§¦å‘é€»è¾‘
- æ”¯æŒå¤æ‚çš„ä¸šåŠ¡è§„åˆ™

### Phase 2.3: åˆ›å»ºå¯è§†åŒ–äº¤äº’ç¼–è¾‘å™¨ç»„ä»¶
- æ‹–æ‹½å¼äº¤äº’é…ç½®ç•Œé¢
- å¯è§†åŒ–äº‹ä»¶æµç¼–è¾‘å™¨
- å®æ—¶é¢„è§ˆå’Œè°ƒè¯•å·¥å…·

## ğŸ“ æ€»ç»“

Phase 1 å·²ç»æˆåŠŸå»ºç«‹äº†ä¸€ä¸ªå®Œæ•´ã€å¯ç”¨çš„ç»„ä»¶äº¤äº’ç³»ç»Ÿï¼ŒåŒ…æ‹¬ï¼š

1. **æ ¸å¿ƒæ¶æ„**: ç¨³å®šçš„äº¤äº’ç®¡ç†å™¨å’Œç±»å‹ç³»ç»Ÿ
2. **ç»„ä»¶é›†æˆ**: å®Œæ•´çš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå’Œäº‹ä»¶å¤„ç†
3. **é…ç½®ç•Œé¢**: ç”¨æˆ·å‹å¥½çš„å¯è§†åŒ–é…ç½®å·¥å…·
4. **æµ‹è¯•ç³»ç»Ÿ**: å¤šå±‚æ¬¡çš„æµ‹è¯•å’ŒéªŒè¯æœºåˆ¶
5. **æ€§èƒ½ä¼˜åŒ–**: æ˜¾è‘—çš„æ€§èƒ½æå‡å’Œå†…å­˜ä¼˜åŒ–

ç³»ç»Ÿç°åœ¨å·²ç»å¯ä»¥æŠ•å…¥å®é™…ä½¿ç”¨ï¼Œä¸º Card2.1 ç»„ä»¶æä¾›å¼ºå¤§çš„äº¤äº’èƒ½åŠ›æ”¯æŒã€‚