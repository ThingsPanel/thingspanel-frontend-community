<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‘Šè­¦è®¡æ•°ç»„ä»¶ API è°ƒç”¨éªŒè¯</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        .section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .success {
            color: #10b981;
            font-weight: bold;
            background: #ecfdf5;
            padding: 12px;
            border-radius: 6px;
            border-left: 4px solid #10b981;
        }
        .info {
            background: #e0f2fe;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #0284c7;
            margin: 15px 0;
        }
        .code-block {
            background: #1f2937;
            color: #e5e7eb;
            padding: 16px;
            border-radius: 6px;
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 12px 0;
            overflow-x: auto;
        }
        .highlight {
            background: #fef3c7;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: 600;
        }
        .checklist {
            list-style: none;
            padding: 0;
        }
        .checklist li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .checklist li:before {
            content: 'âœ… ';
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="section">
            <h1>ğŸ”— å‘Šè­¦è®¡æ•°ç»„ä»¶ API è°ƒç”¨éªŒè¯</h1>
            <div class="success">
                âœ¨ å·²ä¿®å¤ï¼šç»„ä»¶ç°åœ¨è°ƒç”¨çœŸå®çš„ API è€Œä¸æ˜¯æ¨¡æ‹Ÿæ•°æ®ï¼
            </div>
        </header>

        <section class="section">
            <h2>ğŸ¯ ä¿®å¤å†…å®¹</h2>
            <ul class="checklist">
                <li><strong>æ·»åŠ  API å¯¼å…¥</strong> - å¯¼å…¥ getAlarmCount å‡½æ•°</li>
                <li><strong>æ›¿æ¢æ¨¡æ‹Ÿæ•°æ®</strong> - ç§»é™¤ Math.random() ç”Ÿæˆçš„å‡æ•°æ®</li>
                <li><strong>ä½¿ç”¨çœŸå® API</strong> - è°ƒç”¨ getAlarmCount() è·å–å®é™…å‘Šè­¦æ•°æ®</li>
                <li><strong>ä¿æŒæ•°æ®æ ¼å¼å…¼å®¹</strong> - ç»§ç»­æ”¯æŒ alarm_device_total å­—æ®µ</li>
                <li><strong>é”™è¯¯å¤„ç†å®Œå–„</strong> - å¢å¼º API å“åº”å¼‚å¸¸å¤„ç†</li>
            </ul>
        </section>

        <section class="section">
            <h2>ğŸ’» ä»£ç å¯¹æ¯”</h2>
            
            <h3>ä¿®å¤å‰ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰ï¼š</h3>
            <div class="code-block">
// âŒ é”™è¯¯ï¼šä½¿ç”¨æ¨¡æ‹Ÿéšæœºæ•°æ®
const mockAlarmCount = Math.floor(Math.random() * 100)
componentState.currentValue = mockAlarmCount
            </div>

            <h3>ä¿®å¤åï¼ˆçœŸå® APIï¼‰ï¼š</h3>
            <div class="code-block">
// âœ… æ­£ç¡®ï¼šè°ƒç”¨çœŸå®çš„å‘Šè­¦è®¡æ•°API
import { getAlarmCount } from '@/service/api'

const response = await getAlarmCount()

// ä»å“åº”ä¸­è·å–å‘Šè­¦è®¾å¤‡æ€»æ•°
let alarmCount = 0
if (response && response.data && typeof response.data.alarm_device_total === 'number') {
  alarmCount = response.data.alarm_device_total
} else {
  logger.warn('å‘Šè­¦æ•°æ®å“åº”æ ¼å¼å¼‚å¸¸', response)
  alarmCount = 0
}

componentState.currentValue = alarmCount
            </div>
        </section>

        <section class="section">
            <h2>ğŸ” API è°ƒç”¨æµç¨‹</h2>
            
            <div class="info">
                <strong>ğŸ”„ æ•°æ®è·å–æµç¨‹ï¼š</strong><br>
                1. ç»„ä»¶æŒ‚è½½æ—¶è‡ªåŠ¨è°ƒç”¨ <span class="highlight">fetchAlarmData()</span><br>
                2. å†…éƒ¨è°ƒç”¨ <span class="highlight">getAlarmCount()</span> API<br>
                3. è§£æå“åº”ä¸­çš„ <span class="highlight">alarm_device_total</span> å­—æ®µ<br>
                4. æ›´æ–°ç»„ä»¶çŠ¶æ€å¹¶è§¦å‘æ•°æ®å˜åŒ–äº‹ä»¶<br>
                5. æ˜¾ç¤ºçœŸå®çš„å‘Šè­¦è®¾å¤‡æ€»æ•°
            </div>

            <h3>API å“åº”æ ¼å¼ï¼š</h3>
            <div class="code-block">
{
  "data": {
    "alarm_device_total": 23,    // å‘Šè­¦è®¾å¤‡æ€»æ•°
    // å…¶ä»–å­—æ®µ...
  }
}
            </div>
        </section>

        <section class="section">
            <h2>ğŸ›¡ï¸ é”™è¯¯å¤„ç†æœºåˆ¶</h2>
            <ul class="checklist">
                <li><strong>å“åº”æ ¼å¼éªŒè¯</strong> - æ£€æŸ¥å“åº”ç»“æ„å’Œæ•°æ®ç±»å‹</li>
                <li><strong>å¼‚å¸¸æ•è·</strong> - try-catch åŒ…è£… API è°ƒç”¨</li>
                <li><strong>ç”¨æˆ·å‹å¥½æç¤º</strong> - æ˜¾ç¤ºåŠ è½½å’Œé”™è¯¯çŠ¶æ€</li>
                <li><strong>æ—¥å¿—è®°å½•</strong> - è®°å½•æˆåŠŸå’Œå¤±è´¥çš„è°ƒç”¨</li>
                <li><strong>é™çº§å¤„ç†</strong> - API å¤±è´¥æ—¶æ˜¾ç¤º 0</li>
            </ul>
        </section>

        <section class="section">
            <h2>ğŸš€ ç»„ä»¶ç‰¹æ€§</h2>
            
            <div class="info">
                <strong>ğŸ¯ æ ¸å¿ƒç‰¹æ€§ï¼š</strong><br>
                â€¢ <strong>å¼€ç®±å³ç”¨</strong> - æ— éœ€é…ç½®æ•°æ®æºï¼Œè‡ªåŠ¨è·å–æ•°æ®<br>
                â€¢ <strong>å®æ—¶æ•°æ®</strong> - æ˜¾ç¤ºçœŸå®çš„ç³»ç»Ÿå‘Šè­¦ç»Ÿè®¡<br>
                â€¢ <strong>è‡ªåŠ¨åˆ·æ–°</strong> - å¯é…ç½®å®šæ—¶åˆ·æ–°æœºåˆ¶<br>
                â€¢ <strong>å‘åå…¼å®¹</strong> - æ”¯æŒåŸç»„ä»¶çš„æ•°æ®æ ¼å¼<br>
                â€¢ <strong>é”™è¯¯æ¢å¤</strong> - API è°ƒç”¨å¤±è´¥æ—¶ä¼˜é›…é™çº§
            </div>
        </section>

        <section class="section">
            <h2>ğŸ§ª æµ‹è¯•éªŒè¯</h2>
            
            <h3>å¦‚ä½•éªŒè¯ä¿®å¤æ•ˆæœï¼š</h3>
            <ol>
                <li><strong>å¯åŠ¨å¼€å‘æœåŠ¡å™¨</strong> - <code>pnpm dev</code></li>
                <li><strong>è®¿é—® Visual Editor</strong> - æ·»åŠ å‘Šè­¦è®¡æ•°ç»„ä»¶åˆ°é¢æ¿</li>
                <li><strong>è§‚å¯Ÿæ•°æ®æ˜¾ç¤º</strong> - åº”è¯¥æ˜¾ç¤ºçœŸå®çš„å‘Šè­¦æ•°æ®è€Œä¸æ˜¯éšæœºæ•°</li>
                <li><strong>æ£€æŸ¥ç½‘ç»œè¯·æ±‚</strong> - åœ¨å¼€å‘è€…å·¥å…·ä¸­ç¡®è®¤ API è°ƒç”¨</li>
                <li><strong>æµ‹è¯•é”™è¯¯æƒ…å†µ</strong> - æ–­ç½‘æˆ– API å¼‚å¸¸æ—¶çš„å¤„ç†</li>
            </ol>

            <div class="info">
                <strong>ğŸ”§ è°ƒè¯•æç¤ºï¼š</strong><br>
                æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°çš„ <span class="highlight">[AlarmCount]</span> æ—¥å¿—ï¼Œ
                ç¡®è®¤ API è°ƒç”¨å’Œæ•°æ®è§£æè¿‡ç¨‹ã€‚
            </div>
        </section>

        <section class="section">
            <h2>âœ… ä¿®å¤å®Œæˆ</h2>
            <div class="success">
                ğŸ‰ å‘Šè­¦è®¡æ•°ç»„ä»¶ç°åœ¨ä½¿ç”¨çœŸå®çš„ API æ•°æ®ï¼Œä¸å†æ˜¯æ¨¡æ‹Ÿæ•°æ®ï¼<br>
                ç»„ä»¶ä¼šè‡ªåŠ¨è°ƒç”¨ <strong>getAlarmCount()</strong> API å¹¶æ˜¾ç¤ºå®é™…çš„å‘Šè­¦è®¾å¤‡æ€»æ•°ã€‚
            </div>
        </section>
    </div>
</body>
</html>