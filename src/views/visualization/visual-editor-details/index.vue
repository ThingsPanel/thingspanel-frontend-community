<script setup lang="ts">
import { ref } from 'vue'
import { useRoute } from 'vue-router'
import PanelEditor from '@/components/visual-editor/PanelEditor.vue'

const route = useRoute()

const panel_id = (route.query.id as string) || '72da0887-52f9-b546-27ce-e4c06ea07ca7'

const panelEditor = ref<InstanceType<typeof PanelEditor> | null>(null)

// æ¥æ”¶ PanelEditor å¼•ç”¨
const handleStateManagerReady = (sm: any) => {}
</script>

<template>
  <div class="visual-editor-container visual-editor-page">
    <!-- ä¸»ç¼–è¾‘å™¨ -->
    <PanelEditor
      ref="panelEditor"
      :panel-id="panel_id"
      :show-toolbar="true"
      :show-page-header="true"
      @state-manager-ready="handleStateManagerReady"
    />
  </div>
</template>

<style scoped>
.visual-editor-container {
  position: relative;
  width: 100%;
  height: 100%;
  /* ğŸ”¥ ä¿®å¤ï¼šä¸ºç¼–è¾‘å™¨æä¾›æ˜ç¡®çš„æœ€å°é«˜åº¦åŸºå‡† */
  min-height: 100vh; /* ç¡®ä¿è‡³å°‘å æ»¡è§†å£é«˜åº¦ */
}

/* ğŸ”¥ é’ˆå¯¹å½“å‰é¡µé¢ï¼šç§»é™¤ AdminLayout ä¸»å†…å®¹åŒºåŸŸçš„æ»šåŠ¨æ¡ */
.visual-editor-container {
  /* ä½¿ç”¨å›ºå®šé«˜åº¦ï¼Œé¿å…å†…å®¹æº¢å‡º */
  height: calc(100vh - 100px); /* å‡å»å¤´éƒ¨å’Œå¯¼èˆªé«˜åº¦ */
  overflow: hidden;
}
</style>

<style>
/* ğŸ”¥ å…¨å±€æ ·å¼ï¼šåªé’ˆå¯¹è§†è§‰ç¼–è¾‘å™¨é¡µé¢ç§»é™¤æ»šåŠ¨æ¡ */
body:has(.visual-editor-page) main.flex-grow {
  overflow: hidden !important;
}

/* å¦‚æœæµè§ˆå™¨ä¸æ”¯æŒ :hasï¼Œç”¨æ›´é€šç”¨çš„æ–¹æ³• */
.visual-editor-page {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}
</style>
