<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¯ PanelV2 æœ€ç»ˆä¿®å¤éªŒè¯</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            color: #333;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 {
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        .test-section {
            margin: 25px 0;
            padding: 20px;
            border-radius: 10px;
            background: #f8f9fa;
        }
        .test-section.success {
            border-left: 5px solid #28a745;
            background: #d4edda;
        }
        .test-section.info {
            border-left: 5px solid #17a2b8;
            background: #d1ecf1;
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-success { background: #28a745; }
        .status-info { background: #17a2b8; }
        
        .launch-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            margin: 15px 15px 15px 0;
            transition: transform 0.2s;
            font-weight: bold;
        }
        .launch-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }
        
        .fix-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .fix-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #007bff;
        }
        
        .fix-card h4 {
            color: #007bff;
            margin-top: 0;
        }
        
        .test-checklist {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }
        
        .test-checklist ul {
            list-style: none;
            padding-left: 0;
        }
        
        .test-checklist li {
            margin: 10px 0;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 5px;
            border-left: 3px solid #28a745;
        }
        
        .test-checklist li:before {
            content: 'âœ… ';
            color: #28a745;
            font-weight: bold;
        }
        
        .code-snippet {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 13px;
            margin: 15px 0;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ PanelV2 æœ€ç»ˆä¿®å¤éªŒè¯</h1>
            <p>è§£å†³"ä¼ ç»Ÿç»„ä»¶é…ç½®åŠŸèƒ½å¾…å®ç°"ã€"æ•°æ®æºæ˜¾ç¤ºä¸å¯¹"ã€"é…ç½®å˜æ›´ç»„ä»¶æ— å“åº”"é—®é¢˜</p>
            <a href="http://localhost:5002/test/panel-editor-v2" class="launch-button" target="_blank">
                ğŸš€ å¯åŠ¨V2æµ‹è¯•é¡µé¢
            </a>
        </div>

        <div class="test-section success">
            <h3><span class="status-indicator status-success"></span>å·²å®Œæˆçš„æ ¸å¿ƒä¿®å¤</h3>
            <div class="fix-grid">
                <div class="fix-card">
                    <h4>ğŸ”§ é…ç½®é¢æ¿æ˜¾ç¤ºä¿®å¤</h4>
                    <p><strong>é—®é¢˜</strong>ï¼šæ˜¾ç¤º"ä¼ ç»Ÿç»„ä»¶é…ç½®åŠŸèƒ½å¾…å®ç°"</p>
                    <p><strong>ä¿®å¤</strong>ï¼šæ·»åŠ selectedWidgetè®¡ç®—å±æ€§ï¼Œå°†selectedNodeIdè½¬æ¢ä¸ºå®Œæ•´ç»„ä»¶å¯¹è±¡</p>
                    <p><strong>ç»“æœ</strong>ï¼šé…ç½®é¢æ¿èƒ½æ­£ç¡®è¯†åˆ«ç»„ä»¶ç±»å‹ï¼Œæ˜¾ç¤ºå…·ä½“é…ç½®é€‰é¡¹</p>
                </div>
                
                <div class="fix-card">
                    <h4>ğŸ“Š æ•°æ®æºæ˜¾ç¤ºä¿®å¤</h4>
                    <p><strong>é—®é¢˜</strong>ï¼šæ•°æ®æºæ˜¾ç¤ºé”™è¯¯</p>
                    <p><strong>ä¿®å¤</strong>ï¼šæ·»åŠ æ•°æ®æºç›¸å…³äº‹ä»¶å¤„ç†å™¨ï¼Œç¡®ä¿ConfigurationPanelæ­£å¸¸å·¥ä½œ</p>
                    <p><strong>ç»“æœ</strong>ï¼šæ•°æ®æºæ ‡ç­¾é¡µèƒ½æ­£ç¡®æ˜¾ç¤ºå’Œé…ç½®</p>
                </div>
                
                <div class="fix-card">
                    <h4>ğŸ”„ é…ç½®å“åº”ä¿®å¤</h4>
                    <p><strong>é—®é¢˜</strong>ï¼šé…ç½®å˜æ›´åç»„ä»¶æ— ååº”</p>
                    <p><strong>ä¿®å¤</strong>ï¼šåœ¨GridstackRendererä¸­æ·»åŠ ç»„ä»¶çŠ¶æ€å¼ºåˆ¶æ›´æ–°é€»è¾‘</p>
                    <p><strong>ç»“æœ</strong>ï¼šé…ç½®å˜æ›´ç«‹å³åæ˜ åˆ°ç»„ä»¶ä¸Š</p>
                </div>
                
                <div class="fix-card">
                    <h4>ğŸ—ï¸ æ¶æ„å®Œå–„</h4>
                    <p><strong>æ”¹è¿›</strong>ï¼šå®Œå–„äº‹ä»¶é©±åŠ¨æ¶æ„</p>
                    <p><strong>å®ç°</strong>ï¼šConfigEventBus + æ¸²æŸ“å™¨ç›´æ¥æ•°æ®è·å–</p>
                    <p><strong>æ•ˆæœ</strong>ï¼šé…ç½®å’Œæ•°æ®æºå˜æ›´çš„å®Œæ•´å“åº”é“¾è·¯</p>
                </div>
            </div>
        </div>

        <div class="test-section info">
            <h3><span class="status-indicator status-info"></span>å®Œæ•´æµ‹è¯•æµç¨‹</h3>
            <div class="test-checklist">
                <h4>1. åŸºç¡€åŠŸèƒ½éªŒè¯</h4>
                <ul>
                    <li>ä»å·¦ä¾§ç»„ä»¶åº“æ·»åŠ ä»»æ„ç»„ä»¶åˆ°ç”»å¸ƒ</li>
                    <li>å³é”®é€‰æ‹©ç»„ä»¶ï¼Œç‚¹å‡»"é…ç½®"</li>
                    <li>å³ä¾§é…ç½®é¢æ¿åº”æ˜¾ç¤ºå…·ä½“ç»„ä»¶é…ç½®ï¼Œä¸æ˜¯"å¾…å®ç°"</li>
                    <li>åº”è¯¥çœ‹åˆ°åŸºç¡€é…ç½®ã€ç»„ä»¶é…ç½®ã€æ•°æ®æºã€äº¤äº’ç­‰æ ‡ç­¾é¡µ</li>
                </ul>
                
                <h4>2. é…ç½®å˜æ›´éªŒè¯</h4>
                <ul>
                    <li>åœ¨"ç»„ä»¶é…ç½®"æ ‡ç­¾é¡µä¸­ä¿®æ”¹ç»„ä»¶å±æ€§ï¼ˆå¦‚æ ‡é¢˜ã€é¢œè‰²ç­‰ï¼‰</li>
                    <li>ç»„ä»¶åº”ç«‹å³åæ˜ é…ç½®å˜æ›´</li>
                    <li>æ§åˆ¶å°åº”æ˜¾ç¤ºé…ç½®å˜æ›´äº‹ä»¶æ—¥å¿—</li>
                    <li>ä¿å­˜åé‡æ–°åŠ è½½ï¼Œé…ç½®åº”è¯¥è¢«ä¿æŒ</li>
                </ul>
                
                <h4>3. æ•°æ®æºéªŒè¯</h4>
                <ul>
                    <li>åˆ‡æ¢åˆ°"æ•°æ®æº"æ ‡ç­¾é¡µ</li>
                    <li>åº”è¯¥æ˜¾ç¤ºæ•°æ®æºé…ç½®é€‰é¡¹ï¼Œä¸æ˜¯é”™è¯¯ä¿¡æ¯</li>
                    <li>ä¿®æ”¹æ•°æ®æºé…ç½®åï¼Œç»„ä»¶æ•°æ®åº”è‡ªåŠ¨æ›´æ–°</li>
                    <li>æ§åˆ¶å°åº”æ˜¾ç¤ºæ•°æ®æºå¤„ç†æ—¥å¿—</li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <h3><span class="status-indicator status-info"></span>é¢„æœŸçš„æ§åˆ¶å°è¾“å‡º</h3>
            <div class="code-snippet">
// é…ç½®é¢æ¿æ­£å¸¸åŠ è½½
âœ… selectedWidget computed: { id: "widget_123", type: "simple-display", ... }

// é…ç½®å˜æ›´äº‹ä»¶æµ
ğŸ”„ GridstackRenderer æ”¶åˆ°é…ç½®å˜æ›´: {
  componentId: "widget_123",
  section: "component", 
  newConfig: { properties: { title: "æ–°æ ‡é¢˜" } },
  timestamp: 1757240000000,
  source: "user"
}
ç»„ä»¶ widget_123 çš„ component é…ç½®å·²æ›´æ–°

// æ•°æ®æºé…ç½®å˜æ›´
ğŸ”„ GridstackRenderer æ”¶åˆ°é…ç½®å˜æ›´: {
  componentId: "widget_123",
  section: "dataSource",
  newConfig: { type: "static", config: { data: {...} } },
  timestamp: 1757240001000,
  source: "user"  
}
ç»„ä»¶ widget_123 çš„æ•°æ®æºé…ç½®å·²æ›´æ–°ï¼Œè§¦å‘æ•°æ®é‡æ–°è·å–
âœ… ç»„ä»¶ widget_123 æ•°æ®æ›´æ–°æˆåŠŸ: {...}
            </div>
        </div>

        <div class="test-section">
            <h3><span class="status-indicator status-info"></span>é—®é¢˜æ’æŸ¥æŒ‡å—</h3>
            <div class="test-checklist">
                <h4>å¦‚æœé…ç½®é¢æ¿ä»æ˜¾ç¤º"å¾…å®ç°"ï¼š</h4>
                <ul>
                    <li>æ£€æŸ¥selectedWidgetè®¡ç®—å±æ€§æ˜¯å¦è¿”å›æ­£ç¡®å¯¹è±¡</li>
                    <li>åœ¨æ§åˆ¶å°æ‰§è¡Œï¼šconsole.log('selectedWidget:', selectedWidget.value)</li>
                    <li>ç¡®è®¤ç»„ä»¶typeå’Œmetadataå­—æ®µæ­£ç¡®</li>
                </ul>
                
                <h4>å¦‚æœé…ç½®å˜æ›´ä¸ç”Ÿæ•ˆï¼š</h4>
                <ul>
                    <li>æ£€æŸ¥ConfigEventBusäº‹ä»¶æ˜¯å¦æ­£å¸¸å‘å‡º</li>
                    <li>æ£€æŸ¥GridstackRendereræ˜¯å¦ç›‘å¬åˆ°äº‹ä»¶</li>
                    <li>ç¡®è®¤ç»„ä»¶çŠ¶æ€æ›´æ–°é€»è¾‘æ˜¯å¦æ‰§è¡Œ</li>
                </ul>
                
                <h4>å¦‚æœæ•°æ®æºæœ‰é—®é¢˜ï¼š</h4>
                <ul>
                    <li>æ£€æŸ¥æ•°æ®æºäº‹ä»¶å¤„ç†å™¨æ˜¯å¦æ­£ç¡®æ·»åŠ </li>
                    <li>ç¡®è®¤simpleDataBridgeæ˜¯å¦æ­£å¸¸å·¥ä½œ</li>
                    <li>æŸ¥çœ‹æ•°æ®è·å–å’Œæ›´æ–°çš„æ—¥å¿—è¾“å‡º</li>
                </ul>
            </div>
        </div>

        <div class="test-section success">
            <h3><span class="status-indicator status-success"></span>ä¿®å¤æ€»ç»“</h3>
            <p><strong>æ ¹æœ¬é—®é¢˜åˆ†æ</strong>ï¼šç”¨æˆ·åé¦ˆçš„ä¸‰ä¸ªé—®é¢˜éƒ½æºäºV2ç‰ˆæœ¬åœ¨ä»è€ç‰ˆæœ¬è¿ç§»æ—¶ç¼ºå°‘äº†å…³é”®çš„æ¥å£é€‚é…ã€‚</p>
            
            <div class="fix-grid">
                <div class="fix-card">
                    <h4>æ¥å£é€‚é…é—®é¢˜</h4>
                    <ul>
                        <li>ç¼ºå°‘selectedWidgetè®¡ç®—å±æ€§</li>
                        <li>ConfigurationPanelæ¥æ”¶å­—ç¬¦ä¸²è€Œéå¯¹è±¡</li>
                        <li>ç¼ºå°‘æ•°æ®æºäº‹ä»¶å¤„ç†å™¨</li>
                    </ul>
                </div>
                
                <div class="fix-card">
                    <h4>å“åº”é“¾è·¯é—®é¢˜</h4>
                    <ul>
                        <li>é…ç½®å˜æ›´äº‹ä»¶èƒ½å‘å‡ºä½†ç»„ä»¶ä¸å“åº”</li>
                        <li>ç¼ºå°‘å¼ºåˆ¶æ›´æ–°ç»„ä»¶çŠ¶æ€çš„é€»è¾‘</li>
                        <li>æ•°æ®æµå‘ä¸å®Œæ•´</li>
                    </ul>
                </div>
                
                <div class="fix-card">
                    <h4>æ¶æ„é›†æˆé—®é¢˜</h4>
                    <ul>
                        <li>æ–°æ—§æ¶æ„æ¥å£ä¸å…¼å®¹</li>
                        <li>äº‹ä»¶é©±åŠ¨æ¶æ„ä¸å®Œæ•´</li>
                        <li>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†ç¼ºå¤±</li>
                    </ul>
                </div>
            </div>
            
            <p><strong>ä¿®å¤æ•ˆæœ</strong>ï¼šç°åœ¨V2ç‰ˆæœ¬åº”è¯¥å…·å¤‡ä¸è€ç‰ˆæœ¬ç›¸åŒçš„é…ç½®åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ­£ç¡®çš„ç»„ä»¶è¯†åˆ«ã€é…ç½®å˜æ›´å“åº”ã€æ•°æ®æºå¤„ç†ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
        </div>
    </div>

    <script>
        console.log('ğŸ¯ PanelV2æœ€ç»ˆä¿®å¤éªŒè¯é¡µé¢å·²åŠ è½½')
        console.log('âœ… ä¸»è¦ä¿®å¤ï¼šselectedWidgetè®¡ç®—å±æ€§ã€æ•°æ®æºäº‹ä»¶å¤„ç†å™¨ã€é…ç½®å“åº”æœºåˆ¶')
        console.log('ğŸš€ ç‚¹å‡»æŒ‰é’®å¼€å§‹å®Œæ•´åŠŸèƒ½æµ‹è¯•')
        
        // æä¾›æµ‹è¯•è¾…åŠ©
        window.testV2 = {
            checkSelectedWidget: () => {
                console.log('æ£€æŸ¥selectedWidgetçŠ¶æ€...')
                // å¯ä»¥åœ¨å®é™…é¡µé¢ä¸­ä½¿ç”¨
            },
            
            triggerConfigTest: () => {
                console.log('è§¦å‘é…ç½®æµ‹è¯•äº‹ä»¶...')
                // å¯ä»¥ç”¨äºè°ƒè¯•
            }
        }
    </script>
</body>
</html>