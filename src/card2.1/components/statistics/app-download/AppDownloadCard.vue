<!--
  åº”ç”¨ä¸‹è½½ç»„ä»¶ (App Download Card)
  è¿ç§»è‡ª builtin-card/app-downloadï¼Œä¿æŒåŠŸèƒ½ä¸€è‡´æ€§
  å±•ç¤ºç§»åŠ¨åº”ç”¨ä¸‹è½½äºŒç»´ç å’Œåº”ç”¨å•†åº—é“¾æ¥
-->
<template>
  <div class="app-download-card">
    <!-- æ ‡é¢˜åŒºåŸŸ -->
    <div class="app-download-title">
      {{ $t('card.appDownload.title') }}
    </div>

    <!-- å†…å®¹å±•ç¤ºåŒºåŸŸ -->
    <div class="app-download-content">
      <!-- äºŒç»´ç åŒºåŸŸ -->
      <div class="qr-code-section">
        <img :src="downloadAppImage" alt="App Download QR Code" class="qr-code-image" />
      </div>

      <!-- åº”ç”¨å•†åº—é“¾æ¥åŒºåŸŸ -->
      <div class="app-store-section">
        <!-- App Store ä¸‹è½½é“¾æ¥ -->
        <img :src="appStoreImage" alt="Download on App Store" class="store-badge" @click="handleAppStoreClick" />

        <!-- Google Play ä¸‹è½½é“¾æ¥ -->
        <img :src="googlePlayImage" alt="Get it on Google Play" class="store-badge" @click="handleGooglePlayClick" />
      </div>
    </div>

    <!-- è¯´æ˜æ–‡å­— -->
    <div class="app-download-description">
      {{ $t('card.appDownload.scanOrClick') }}
    </div>
  </div>
</template>

<script setup lang="ts">
/**
 * åº”ç”¨ä¸‹è½½ç»„ä»¶
 * çº¯å±•ç¤ºå‹ç»„ä»¶ï¼ŒæŒ‰ç…§åŸç»„ä»¶å†™æ­»æ¥å£é€»è¾‘ï¼ˆæ— æ•°æ®æºéœ€æ±‚ï¼‰
 */

import { useI18n } from 'vue-i18n'
import { useThemeStore } from '@/store/modules/theme'

// ğŸš¨ ä¸¥æ ¼éµå¾ªé¡¹ç›®è§„èŒƒï¼šå¯¼å…¥å›¾ç‰‡èµ„æº
import downloadAppImage from '@/card2.1/components/statistics/app-download/download_app.png'
import appStoreImage from '@/card2.1/components/statistics/app-download/placeholder-app-store.png'
import googlePlayImage from '@/card2.1/components/statistics/app-download/placeholder-google-play.png'

// ç»„ä»¶åŸºæœ¬è®¾ç½®
defineOptions({
  name: 'AppDownloadCard'
})

// ğŸš¨ å¼ºåˆ¶é›†æˆå›½é™…åŒ–ç³»ç»Ÿ
const { t } = useI18n()

// ğŸš¨ å¼ºåˆ¶é›†æˆä¸»é¢˜ç³»ç»Ÿ
const themeStore = useThemeStore()

/**
 * å¤„ç† App Store ç‚¹å‡»äº‹ä»¶
 * æŒ‰ç…§åŸç»„ä»¶é€»è¾‘ï¼šç›®å‰ä¸ºå ä½ç¬¦åŠŸèƒ½
 */
const handleAppStoreClick = () => {
  // ğŸ”„ ä¿æŒä¸åŸç»„ä»¶ä¸€è‡´ï¼šæš‚æ— å®é™…è·³è½¬é€»è¾‘
  console.log('App Store clicked - å¾…é…ç½®å®é™…ä¸‹è½½é“¾æ¥')
}

/**
 * å¤„ç† Google Play ç‚¹å‡»äº‹ä»¶
 * æŒ‰ç…§åŸç»„ä»¶é€»è¾‘ï¼šç›®å‰ä¸ºå ä½ç¬¦åŠŸèƒ½
 */
const handleGooglePlayClick = () => {
  // ğŸ”„ ä¿æŒä¸åŸç»„ä»¶ä¸€è‡´ï¼šæš‚æ— å®é™…è·³è½¬é€»è¾‘
  console.log('Google Play clicked - å¾…é…ç½®å®é™…ä¸‹è½½é“¾æ¥')
}
</script>

<style scoped>
/* 
  åº”ç”¨ä¸‹è½½ç»„ä»¶æ ·å¼
  ğŸš¨ ä¸¥æ ¼éµå¾ªé¡¹ç›®è§„èŒƒï¼šä½¿ç”¨ä¸»é¢˜å˜é‡ï¼Œæ”¯æŒæ˜æš—ä¸»é¢˜åˆ‡æ¢
*/

.app-download-card {
  /* å®¹å™¨åŸºç¡€æ ·å¼ */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  padding: 16px;

  /* ğŸš¨ ä¸»é¢˜ç³»ç»Ÿé›†æˆ - ä½¿ç”¨ CSS å˜é‡ */
  background-color: var(--card-color);
  color: var(--text-color);
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius);

  /* é˜²æ­¢å†…å®¹æº¢å‡º */
  box-sizing: border-box;
  overflow: hidden;
}

.app-download-title {
  /* æ ‡é¢˜æ ·å¼ */
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 16px;
  text-align: center;

  /* ä¸»é¢˜é€‚é… */
  color: var(--text-color);
}

.app-download-content {
  /* ä¸»å†…å®¹åŒºåŸŸ */
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  margin-bottom: 16px;
  flex-wrap: wrap;
}

.qr-code-section {
  /* äºŒç»´ç åŒºåŸŸ */
  display: flex;
  align-items: center;
  justify-content: center;
}

.qr-code-image {
  /* äºŒç»´ç å›¾ç‰‡æ ·å¼ */
  width: 96px;
  height: 96px;
  object-fit: contain;

  /* ä¸»é¢˜é€‚é… - äºŒç»´ç åœ¨æš—è‰²æ¨¡å¼ä¸‹çš„å¤„ç† */
  filter: var(--image-filter, none);
}

.app-store-section {
  /* åº”ç”¨å•†åº—é“¾æ¥åŒºåŸŸ */
  display: flex;
  flex-direction: column;
  gap: 8px;
  align-items: center;
}

.store-badge {
  /* åº”ç”¨å•†åº—å¾½ç« æ ·å¼ */
  height: 40px;
  cursor: pointer;
  object-fit: contain;
  transition:
    transform 0.2s ease,
    opacity 0.2s ease;

  /* ä¸»é¢˜é€‚é… */
  filter: var(--image-filter, none);
}

.store-badge:hover {
  /* æ‚¬åœæ•ˆæœ */
  transform: scale(1.05);
  opacity: 0.8;
}

.store-badge:active {
  /* ç‚¹å‡»æ•ˆæœ */
  transform: scale(0.98);
}

.app-download-description {
  /* è¯´æ˜æ–‡å­—æ ·å¼ */
  font-size: 14px;
  text-align: center;
  line-height: 1.4;

  /* ä¸»é¢˜é€‚é… */
  color: var(--text-color-2);
}

/* å“åº”å¼è®¾è®¡ - å°å°ºå¯¸é€‚é… */
@container (max-width: 250px) {
  .app-download-content {
    flex-direction: column;
    gap: 12px;
  }

  .qr-code-image {
    width: 80px;
    height: 80px;
  }

  .store-badge {
    height: 36px;
  }

  .app-download-title {
    font-size: 16px;
    margin-bottom: 12px;
  }
}

/* æš—è‰²ä¸»é¢˜ç‰¹å®šæ ·å¼ */
[data-theme='dark'] .app-download-card {
  /* æš—è‰²æ¨¡å¼ä¸‹çš„è¾¹æ¡†å’Œé˜´å½± */
  border-color: var(--border-color);
  box-shadow: var(--box-shadow-dark);
}

[data-theme='dark'] .qr-code-image,
[data-theme='dark'] .store-badge {
  /* æš—è‰²æ¨¡å¼ä¸‹å›¾ç‰‡çš„äº®åº¦è°ƒæ•´ */
  filter: brightness(0.9);
}
</style>
