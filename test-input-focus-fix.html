<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è¾“å…¥æ¡†ç„¦ç‚¹ä¸¢å¤±ä¿®å¤æµ‹è¯•</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
    }
    .test-container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      padding: 24px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .test-header {
      background: linear-gradient(135deg, #ff7875 0%, #fa8c16 100%);
      color: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 24px;
    }
    .test-section {
      margin-bottom: 32px;
      padding: 20px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      background: #fafafa;
    }
    .issue-item {
      margin-bottom: 16px;
      padding: 16px;
      background: white;
      border-radius: 6px;
      border-left: 4px solid #ff4d4f;
    }
    .issue-item.fixed {
      border-left-color: #52c41a;
      background: #f6ffed;
    }
    .issue-item h4 {
      margin: 0 0 8px 0;
      color: #ff4d4f;
    }
    .issue-item.fixed h4 {
      color: #52c41a;
    }
    .issue-item p {
      margin: 0;
      color: #666;
      font-size: 14px;
    }
    .step {
      margin-bottom: 16px;
      padding: 12px;
      background: white;
      border-radius: 6px;
      border-left: 4px solid #2080f0;
    }
    .step h4 {
      margin: 0 0 8px 0;
      color: #333;
    }
    .step p {
      margin: 0;
      color: #666;
      font-size: 14px;
    }
    .nav-link {
      display: inline-block;
      padding: 12px 24px;
      background: #2080f0;
      color: white;
      text-decoration: none;
      border-radius: 6px;
      margin-right: 12px;
      margin-bottom: 12px;
      transition: all 0.3s ease;
    }
    .nav-link:hover {
      background: #40a9ff;
      transform: translateY(-1px);
    }
    .code-block {
      background: #f8f8f8;
      padding: 16px;
      border-radius: 6px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      color: #333;
      margin: 12px 0;
      border: 1px solid #e0e0e0;
    }
    .before-after {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }
    .before, .after {
      padding: 16px;
      border-radius: 6px;
    }
    .before {
      background: #fff2f0;
      border: 1px solid #ffccc7;
    }
    .after {
      background: #f6ffed;
      border: 1px solid #b7eb8f;
    }
  </style>
</head>
<body>
  <div class="test-container">
    <div class="test-header">
      <h1>ğŸ› ï¸ è¾“å…¥æ¡†ç„¦ç‚¹ä¸¢å¤±ä¿®å¤æµ‹è¯•</h1>
      <p>ä¿®å¤URLå‚æ•°é…ç½®ä¸­è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹å’Œé»˜è®¤å€¼è¦†ç›–çš„é—®é¢˜</p>
    </div>

    <div class="test-section">
      <h3>ğŸ› ä¿®å¤çš„é—®é¢˜æ¸…å•</h3>
      
      <div class="issue-item fixed">
        <h4>âœ… é—®é¢˜1ï¼šè¾“å…¥æ¡†ç„¦ç‚¹ä¸¢å¤±</h4>
        <p>æ¯æ¬¡è¾“å…¥ä¸€ä¸ªå­—ç¬¦åï¼Œå‚æ•°åè¾“å…¥æ¡†å¤±å»ç„¦ç‚¹ï¼Œéœ€è¦é‡æ–°ç‚¹å‡»æ‰èƒ½ç»§ç»­è¾“å…¥</p>
        <p><strong>æ ¹æœ¬åŸå› </strong>ï¼šVue keyå€¼ä¸ç¨³å®šï¼Œæ¯æ¬¡è¾“å…¥è§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“</p>
      </div>

      <div class="issue-item fixed">
        <h4>âœ… é—®é¢˜2ï¼šé»˜è®¤å€¼å¼ºåˆ¶è¦†ç›–ç”¨æˆ·è¾“å…¥</h4>
        <p>æ¸…ç©ºå‚æ•°åè¾“å…¥æ¡†åï¼Œä¼šè¢«é»˜è®¤å€¼è‡ªåŠ¨å¡«å……ï¼Œæ— æ³•ä¿æŒç©ºå€¼çŠ¶æ€</p>
        <p><strong>æ ¹æœ¬åŸå› </strong>ï¼šç¼ºå°‘åˆç†çš„é»˜è®¤å€¼ç­–ç•¥ï¼Œè¿‡åº¦çš„è‡ªåŠ¨å¡«å……é€»è¾‘</p>
      </div>

      <div class="issue-item fixed">
        <h4>âœ… é—®é¢˜3ï¼šé¢‘ç¹çš„ç»„ä»¶é‡æ–°æ¸²æŸ“</h4>
        <p>æ¯æ¬¡é”®ç›˜è¾“å…¥éƒ½è§¦å‘æ•´ä¸ªå‚æ•°åˆ—è¡¨é‡æ–°æ¸²æŸ“ï¼Œå½±å“æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ</p>
        <p><strong>æ ¹æœ¬åŸå› </strong>ï¼šç¼ºå°‘é˜²æŠ–æœºåˆ¶ï¼Œè¿‡åº¦çš„å“åº”å¼æ›´æ–°</p>
      </div>
    </div>

    <div class="test-section">
      <h3>ğŸ”§ ä¿®å¤æ–¹æ¡ˆå¯¹æ¯”</h3>
      
      <div class="before-after">
        <div class="before">
          <h4>ä¿®å¤å‰ âŒ</h4>
          <div class="code-block">
// ä¸ç¨³å®šçš„keyå€¼ï¼ˆåŒ…å«param.keyï¼‰
:key="param._id || `param-${index}-${param.key || 'empty'}`"

// æ¯æ¬¡è¾“å…¥éƒ½è§¦å‘æ›´æ–°
@update:value="value => updateParameter({ ...param, key: value }, index)"

// æ— é˜²æŠ–æœºåˆ¶ï¼Œé¢‘ç¹é‡æ–°æ¸²æŸ“
const updateParameter = (param, index) => {
  emit('update:modelValue', updatedParams)
}
          </div>
        </div>
        
        <div class="after">
          <h4>ä¿®å¤å âœ…</h4>
          <div class="code-block">
// ç¨³å®šçš„keyå€¼ï¼ˆä»…ä½¿ç”¨_idï¼‰
:key="param._id"

// ä½¿ç”¨@inputæ›¿ä»£@update:value
@input="value => updateParameterKey(param, index, value)"

// æ·»åŠ bluräº‹ä»¶å¤„ç†é»˜è®¤å€¼é€»è¾‘
@blur="() => ensureParameterKeyNotEmpty(param, index)"

// è®¡ç®—å±æ€§ç¡®ä¿æ‰€æœ‰å‚æ•°éƒ½æœ‰ç¨³å®šID
const parametersWithStableIds = computed(() => {
  return props.modelValue.map((param, index) => 
    ensureParameterHasId(param, index)
  )
})
          </div>
        </div>
      </div>
    </div>

    <div class="test-section">
      <h3>ğŸš€ æ ¸å¿ƒä¿®å¤å†…å®¹</h3>
      
      <div class="step">
        <h4>ä¿®å¤1ï¼šç¨³å®šçš„Vue Keyå€¼</h4>
        <p>â€¢ ä½¿ç”¨çº¯_idä½œä¸ºkeyï¼Œä¸å†ä¾èµ–å¯å˜çš„param.key<br>
           â€¢ ä¸ºå†å²å‚æ•°è‡ªåŠ¨ç”Ÿæˆç¨³å®šçš„ID<br>
           â€¢ ç¡®ä¿Vueèƒ½æ­£ç¡®è¿½è¸ªDOMå…ƒç´ ï¼Œé¿å…é‡æ–°åˆ›å»º</p>
      </div>

      <div class="step">
        <h4>ä¿®å¤2ï¼šä¼˜åŒ–çš„è¾“å…¥äº‹ä»¶å¤„ç†</h4>
        <p>â€¢ ä½¿ç”¨@inputæ›¿ä»£@update:valueï¼Œæä¾›æ›´å¥½çš„è¾“å…¥ä½“éªŒ<br>
           â€¢ ç«‹å³æ›´æ–°æ˜¾ç¤ºå€¼ï¼Œé¿å…è¾“å…¥å»¶è¿Ÿ<br>
           â€¢ ç§»é™¤ä¸å¿…è¦çš„é˜²æŠ–å®šæ—¶å™¨ï¼ˆç®€åŒ–é€»è¾‘ï¼‰</p>
      </div>

      <div class="step">
        <h4>ä¿®å¤3ï¼šåˆç†çš„é»˜è®¤å€¼ç­–ç•¥</h4>
        <p>â€¢ ä»…åœ¨å®Œå…¨ä¸ºç©ºæ—¶è®¾ç½®é»˜è®¤å€¼ï¼ˆå¤±å»ç„¦ç‚¹æ—¶æ£€æŸ¥ï¼‰<br>
           â€¢ ä¸å¼ºåˆ¶è¦†ç›–ç”¨æˆ·çš„è¾“å…¥<br>
           â€¢ æä¾›æ›´å‹å¥½çš„ç”¨æˆ·ä½“éªŒ</p>
      </div>

      <div class="step">
        <h4>ä¿®å¤4ï¼šå†å²å‚æ•°å…¼å®¹æ€§</h4>
        <p>â€¢ è‡ªåŠ¨ä¸ºæ²¡æœ‰_idçš„å†å²å‚æ•°ç”Ÿæˆç¨³å®šID<br>
           â€¢ é€šè¿‡è®¡ç®—å±æ€§ç¡®ä¿å…¼å®¹æ€§<br>
           â€¢ ä¸å½±å“ç°æœ‰åŠŸèƒ½</p>
      </div>
    </div>

    <div class="test-section">
      <h3>ğŸ“‹ æµ‹è¯•æ­¥éª¤</h3>
      
      <div class="step">
        <h4>æ­¥éª¤1ï¼šè®¿é—®æ•°æ®æºç³»ç»Ÿæµ‹è¯•é¡µé¢</h4>
        <p>æ‰“å¼€æ•°æ®æºç³»ç»Ÿæµ‹è¯•é¡µé¢ï¼Œæ‰¾åˆ°HTTPé…ç½®è¡¨å•</p>
        <a href="http://localhost:5002/test/data-source-system" class="nav-link" target="_blank">
          æ•°æ®æºç³»ç»Ÿæµ‹è¯•
        </a>
      </div>

      <div class="step">
        <h4>æ­¥éª¤2ï¼šæµ‹è¯•å‚æ•°åè¾“å…¥æ¡†</h4>
        <p>1. ç‚¹å‡»"æ·»åŠ å‚æ•°"æ·»åŠ æ–°çš„URLå‚æ•°<br>
           2. åœ¨å‚æ•°åè¾“å…¥æ¡†ä¸­<strong>è¿ç»­è¾“å…¥å¤šä¸ªå­—ç¬¦</strong><br>
           3. <strong>éªŒè¯ï¼šè¾“å…¥æ¡†åº”ä¿æŒç„¦ç‚¹ï¼Œæ— éœ€é‡æ–°ç‚¹å‡»</strong></p>
      </div>

      <div class="step">
        <h4>æ­¥éª¤3ï¼šæµ‹è¯•é»˜è®¤å€¼é€»è¾‘</h4>
        <p>1. å°†å‚æ•°åè¾“å…¥æ¡†å®Œå…¨æ¸…ç©º<br>
           2. ç‚¹å‡»å…¶ä»–åœ°æ–¹ä½¿è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹<br>
           3. <strong>éªŒè¯ï¼šåº”è®¾ç½®åˆç†çš„é»˜è®¤å€¼å¦‚"param1"</strong><br>
           4. å†æ¬¡ç¼–è¾‘æ—¶ï¼Œåº”èƒ½æ­£å¸¸æ¸…ç©ºå’Œä¿®æ”¹</p>
      </div>

      <div class="step">
        <h4>æ­¥éª¤4ï¼šæµ‹è¯•å‚æ•°å€¼è¾“å…¥æ¡†</h4>
        <p>1. ç‚¹å‡»å‚æ•°çš„"é…ç½®"æŒ‰é’®å±•å¼€è¯¦æƒ…é¢æ¿<br>
           2. åœ¨"å€¼"è¾“å…¥æ¡†ä¸­è¿ç»­è¾“å…¥<br>
           3. <strong>éªŒè¯ï¼šè¾“å…¥æ¡†åº”ä¿æŒç„¦ç‚¹ï¼Œè¾“å…¥æµç•…</strong></p>
      </div>
    </div>

    <div class="test-section">
      <h3>âœ… é¢„æœŸç»“æœ</h3>
      
      <div class="step">
        <h4>ğŸ¯ è¾“å…¥ä½“éªŒæ”¹å–„</h4>
        <p>â€¢ è¾“å…¥æ¡†ä¿æŒç„¦ç‚¹ï¼Œå¯ä»¥è¿ç»­è¾“å…¥è€Œæ— éœ€é‡æ–°ç‚¹å‡»<br>
           â€¢ è¾“å…¥å“åº”æµç•…ï¼Œæ²¡æœ‰æ˜æ˜¾çš„å»¶è¿Ÿ<br>
           â€¢ ä¸ä¼šå‡ºç°æ„å¤–çš„é»˜è®¤å€¼è¦†ç›–</p>
      </div>

      <div class="step">
        <h4>ğŸš€ æ€§èƒ½æå‡</h4>
        <p>â€¢ å‡å°‘ä¸å¿…è¦çš„ç»„ä»¶é‡æ–°æ¸²æŸ“<br>
           â€¢ ç¨³å®šçš„DOMå…ƒç´ è¿½è¸ª<br>
           â€¢ æ›´å¥½çš„Vueå“åº”å¼æ€§èƒ½</p>
      </div>

      <div class="step">
        <h4>ğŸ›¡ï¸ å…¼å®¹æ€§ä¿è¯</h4>
        <p>â€¢ å†å²å‚æ•°æ­£å¸¸æ˜¾ç¤ºå’Œç¼–è¾‘<br>
           â€¢ ä¸å½±å“ç°æœ‰çš„å‚æ•°é…ç½®åŠŸèƒ½<br>
           â€¢ ä¿æŒä¸å…¶ä»–ç»„ä»¶çš„é›†æˆ</p>
      </div>
    </div>

    <div class="test-section">
      <h3>ğŸ”— ç›¸å…³æµ‹è¯•é“¾æ¥</h3>
      <a href="http://localhost:5002/test/data-source-system" class="nav-link" target="_blank">
        æ•°æ®æºç³»ç»Ÿæµ‹è¯•
      </a>
      <a href="http://localhost:5002/test/data-binding-system-integration" class="nav-link" target="_blank">
        æ•°æ®ç»‘å®šç³»ç»Ÿæµ‹è¯•
      </a>
      <a href="http://localhost:5002/test/editor-integration" class="nav-link" target="_blank">
        ç¼–è¾‘å™¨é›†æˆæµ‹è¯•
      </a>
    </div>

    <div class="test-section" style="background: #e6f7ff; border-color: #91d5ff;">
      <h3>ğŸ’¡ æŠ€æœ¯è¦ç‚¹æ€»ç»“</h3>
      
      <div class="code-block">
// æ ¸å¿ƒä¿®å¤ï¼šç¨³å®šçš„Vue Keyå€¼
:key="param._id"  // åªä¾èµ–ç¨³å®šIDï¼Œä¸ä¾èµ–å¯å˜å±æ€§

// ä¼˜åŒ–çš„äº‹ä»¶å¤„ç†
@input="value => updateParameterKey(param, index, value)"  // ç«‹å³å“åº”
@blur="() => ensureParameterKeyNotEmpty(param, index)"     // æ™ºèƒ½é»˜è®¤å€¼

// å…¼å®¹æ€§å¤„ç†
const parametersWithStableIds = computed(() => {
  return props.modelValue.map((param, index) => ensureParameterHasId(param, index))
})
      </div>
    </div>
  </div>
</body>
</html>